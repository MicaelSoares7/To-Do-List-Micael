<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="assets/css/style.css">
    <title>To do List - Micael Soares</title>
</head>
<body>
    <header>
    </header>
    <h1>Criar Tarefas</h1>
    <br>
    <div>
        <div class="input-group">
            <input class="input" required type="text" id="titulo-tarefa">
            <label class="label" for="titulo-tarefa">Título</label>
        </div>
        <div class="input-group">
            <input class="input" required type="text" id="descricao">
            <label class="label" for="descricao">Descrição</label>
        </div>
        <button id="cadastrar" type="submit" onclick="cadastrar();">Cadastrar</button>
    </div>

    <div id="dados"></div>

    <script>
        document.addEventListener('DOMContentLoaded', carregarTarefas);

        function cadastrar() {
            const titulo = document.getElementById('titulo-tarefa').value;
            const desc = document.getElementById('descricao').value;

            // Recupera as tarefas já existentes do localStorage
            const tarefas = JSON.parse(localStorage.getItem('tarefas')) || [];

            // Adiciona a nova tarefa
            tarefas.push({ titulo, desc });

            // Salva as tarefas no localStorage
            localStorage.setItem('tarefas', JSON.stringify(tarefas));

            // Atualiza a exibição das tarefas
            carregarTarefas();

            // Limpa os campos de entrada
            document.getElementById('titulo-tarefa').value = '';
            document.getElementById('descricao').value = '';
        }

        function carregarTarefas() {
            const d = document.getElementById('dados');
            d.innerHTML = '';

            // Recupera as tarefas do localStorage
            const tarefas = JSON.parse(localStorage.getItem('tarefas')) || [];

            // Exibe cada tarefa na página
            tarefas.forEach((tarefa, index) => {
                const p = document.createElement('p');
                p.innerHTML = `<h2>${tarefa.titulo}</h2><br>${tarefa.desc}<br>
                                <button onclick="editarTarefa(${index});">Editar</button>
                                <button onclick="excluirTarefa(${index});">Excluir</button>
                                <hr>`;
                d.appendChild(p);
            });
        }

        function editarTarefa(index) {
            // Recupera as tarefas do localStorage
            const tarefas = JSON.parse(localStorage.getItem('tarefas')) || [];

            // Preenche os campos de entrada com os dados da tarefa selecionada
            document.getElementById('titulo-tarefa').value = tarefas[index].titulo;
            document.getElementById('descricao').value = tarefas[index].desc;

            // Remove a tarefa da lista
            tarefas.splice(index, 1);

            // Salva as tarefas atualizadas no localStorage
            localStorage.setItem('tarefas', JSON.stringify(tarefas));

            // Atualiza a exibição das tarefas
            carregarTarefas();
        }

        function excluirTarefa(index) {
            // Recupera as tarefas do localStorage
            const tarefas = JSON.parse(localStorage.getItem('tarefas')) || [];

            // Remove a tarefa da lista
            tarefas.splice(index, 1);

            // Salva as tarefas atualizadas no localStorage
            localStorage.setItem('tarefas', JSON.stringify(tarefas));

            // Atualiza a exibição das tarefas
            carregarTarefas();
        }
    </script>
</body>
</html>
